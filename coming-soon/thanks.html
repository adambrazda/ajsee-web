<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title data-i18n-key="thanks.title">Díky – AJSEE</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-K0ZS0D9JLK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-K0ZS0D9JLK');
  </script>

  <style>
    :root {
      --bg:#f7f8fa;
      --text:#0d2235;
      --muted:#5c6a7a;
      --border:#d9e1ea;
      --brand:#0077cc;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Poppins, system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
    }
    .wrap { max-width: 720px; margin: 0 auto; padding: 64px 20px; }
    .card { background: #fff; border: 1px solid var(--border); border-radius: 16px; padding: 32px; }
    h1 { margin: 0 0 8px; }
    p { color: var(--muted); margin: 0; }
    a.btn {
      display: inline-block;
      margin-top: 14px;
      padding: 12px 18px;
      background: var(--brand);
      color: #fff;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
    }
    a.btn:hover,
    a.btn:focus { background: #0063a8; color: #fff; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1 data-i18n-key="thanks.heading">Děkujeme, jsi na seznamu.</h1>
      <p data-i18n-key="thanks.lead">
        Potvrď prosím přihlášení v e-mailu (double opt-in). Brzy pošleme novinky o spuštění a partnerech.
      </p>
      <a class="btn" id="backLink" href="/" data-i18n-key="thanks.back">Zpět na AJSEE.cz</a>
    </div>
  </div>

  <!-- i18n bootstrapper: ?lang -> <html lang> -> cs, načte /locales/{lang}.json a aplikuje texty -->
  <script>
    (function () {
      const SUPPORTED = ['cs','en','de','sk','pl','hu'];
      const qs = new URLSearchParams(location.search);

      // 1) Zamknout jazyk
      let lang = (qs.get('lang') || '').toLowerCase();
      if (!SUPPORTED.includes(lang)) lang = (document.documentElement.getAttribute('lang') || '').toLowerCase();
      if (!SUPPORTED.includes(lang)) lang = 'cs';
      document.documentElement.setAttribute('lang', lang);

      // 2) Načíst překlady a aplikovat
      fetch(`/locales/${lang}.json`, { cache: 'no-store' })
        .then(r => r.ok ? r.json() : null)
        .then(dict => {
          if (!dict) return;

          const get = (path) => {
            try { return path.split('.').reduce((o,k)=> (o && typeof o === 'object' ? o[k] : undefined), dict); }
            catch { return undefined; }
          };

          // texty
          document.querySelectorAll('[data-i18n-key]').forEach(el => {
            const key = el.getAttribute('data-i18n-key');
            const val = get(key);
            if (typeof val === 'string') el.textContent = val;
          });

          // <title>
          const titleEl = document.querySelector('title[data-i18n-key]');
          if (titleEl) {
            const k = titleEl.getAttribute('data-i18n-key');
            const v = get(k);
            if (typeof v === 'string') titleEl.textContent = v;
          }
        })
        .catch(() => {});

      // 3) Zpět na web s ?lang
      const back = document.getElementById('backLink');
      if (back) {
        const url = new URL(back.getAttribute('href') || '/', location.origin);
        url.searchParams.set('lang', lang);
        back.setAttribute('href', url.pathname + '?' + url.searchParams.toString());
      }

      // 4) GA event (volitelné)
      if (window.gtag) {
        window.gtag('event', 'page_view_waitlist_thanks', { lang });
      }
    })();
  </script>
</body>
</html>
