<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n-key="events-page-title">Ud√°losti</title>

  <meta name="theme-color" content="#0077cc" />

  <!-- Favicona -->
  <link rel="icon" href="/images/logo-ajsee.png" />

  <!-- Pr√©miov√© fonty (sladƒõn√© s filtrovac√≠m UI) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- ‚úÖ CSS p≈ôes link (sjednoceno) -->
  <link rel="stylesheet" href="/src/styles/main.scss" />

  <!-- Unified FE render ON. Inline TM zak√°z√°n. -->
  <script>
    window.__TM_INLINE_DISABLED = true;
    window.__AJSEE_EVENTS_OWNS_FILTERS = true;

    // Impact tracking ‚Äì vyber jednu variantu:
    // window.__impact = { clickBase: 'https://YOUR-IMPACT-REDIRECTOR/?url=' };
    window.__impact = window.__impact || { param: 'irclickid', value: '<SET_YOUR_CLICK_ID>' };
  </script>

  <!-- Google tag (jen HTTPS/prod) -->
  <script>
    (function(){
      const isProdHttps =
        location.protocol === 'https:' &&
        !/localhost|127\.0\.0\.1|0\.0\.0\.0/i.test(location.hostname);

      if (!isProdHttps) return;

      const s = document.createElement('script');
      s.async = true;
      s.src = 'https://www.googletagmanager.com/gtag/js?id=G-K0ZS0D9JLK';
      s.onload = function(){
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        window.gtag = gtag;
        gtag('js', new Date());
        gtag('config', 'G-K0ZS0D9JLK');
      };
      document.head.appendChild(s);
    })();
  </script>

  <!-- i18n fallback ‚Äì jen kdy≈æ hlavn√≠ engine je≈°tƒõ nedodal p≈ôeklady -->
  <script>
    (function(){
      function detectLang(){
        try {
          const qs = new URLSearchParams(location.search);
          return (qs.get('lang') || document.documentElement.lang || 'cs').toLowerCase();
        } catch { return 'cs'; }
      }

      function applyI18nFallback(lang){
        const root = window.translations || null;
        if (!root) return;

        const dict = root[lang] || root;
        const get = (path) => path.split('.').reduce((o,k)=>o?.[k], dict);

        document.querySelectorAll('[data-i18n-key]').forEach(el => {
          const key = el.getAttribute('data-i18n-key');
          const val = get(key);
          if (typeof val === 'string' && val.trim()) el.textContent = val;
        });
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
          const key = el.getAttribute('data-i18n-placeholder');
          const val = get(key);
          if (typeof val === 'string' && val.trim()) el.setAttribute('placeholder', val);
        });
        document.querySelectorAll('[data-i18n-aria]').forEach(el => {
          const key = el.getAttribute('data-i18n-aria');
          const val = get(key);
          if (typeof val === 'string' && val.trim()) {
            el.setAttribute('aria-label', val);
            el.setAttribute('title', val);
          }
        });
        document.querySelectorAll('[data-i18n-alt]').forEach(el => {
          const key = el.getAttribute('data-i18n-alt');
          const val = get(key);
          if (typeof val === 'string' && val.trim()) el.setAttribute('alt', val);
        });
      }

      window.addEventListener('DOMContentLoaded', () => {
        const lang = detectLang();
        document.documentElement.lang = lang;

        // Pokud u≈æ main.js poskytl applyTranslations, fallback nespou≈°tƒõj.
        if (typeof window.applyTranslations === 'function') return;

        setTimeout(() => {
          if (typeof window.applyTranslations === 'function') return;
          applyI18nFallback(lang);
        }, 250);
      });
    })();
  </script>

  <!-- ‚úÖ JEDIN√ù vstup (dev i prod): Vite si v produkci dopln√≠ /assets/* s√°m -->
  <script type="module" src="/src/main.js"></script>
</head>
<body data-page="events">
  <!-- Header a navigace -->
  <header class="site-header">
    <div class="header-inner">
      <a href="/" class="logo-link" aria-label="Dom≈Ø">
        <img src="/images/logo-ajsee.png" alt="AJSEE Logo" class="logo" />
      </a>

      <button class="hamburger-btn" id="hamburger" aria-label="Otev≈ô√≠t menu" type="button">
        <span></span><span></span><span></span>
      </button>

      <nav class="main-nav" id="mainNav" role="navigation" aria-label="Hlavn√≠ menu">
        <button class="menu-close" aria-label="Zav≈ô√≠t menu" type="button">&times;</button>
        <ul>
          <li><a href="/" data-i18n-key="nav-home">Dom≈Ø</a></li>
          <li><a href="/events" data-i18n-key="nav-events" aria-current="page">Ud√°losti</a></li>
          <li><a href="/accommodation" data-i18n-key="nav-accommodation">Ubytov√°n√≠</a></li>
          <li><a href="/partners" data-i18n-key="nav-partners">Pro partnery</a></li>
          <li><a href="/about" data-i18n-key="nav-about">O n√°s</a></li>
          <li><a href="/blog" data-i18n-key="nav-blog">Blog</a></li>
          <li><a href="/faq" data-i18n-key="nav-faq">FAQ</a></li>
          <li><a href="#contact" data-i18n-key="nav-contact">Kontakt</a></li>
        </ul>

        <!-- Jazykov√© p≈ôep√≠naƒçe v mobiln√≠m menu (DROPDOWN) -->
        <div class="language-switcher mobile-switcher" aria-label="Jazyk">
          <details class="lang-dropdown" id="langDropdownMobile">
            <summary class="lang-current" aria-label="Zmƒõnit jazyk">
              <img class="lang-current-flag" src="/images/flags/cz.svg" alt="ƒåe≈°tina" width="22" height="16"/>
              <span class="lang-current-label">ƒåe≈°tina</span>
              <span class="lang-caret" aria-hidden="true">‚ñæ</span>
            </summary>

            <div class="lang-menu" role="listbox" aria-label="Vyber jazyk">
              <button class="lang-btn" type="button" data-lang="cs" aria-label="ƒåe≈°tina">
                <img src="/images/flags/cz.svg" alt="ƒåe≈°tina" width="22" height="16"/> ƒåe≈°tina
              </button>
              <button class="lang-btn" type="button" data-lang="en" aria-label="English">
                <img src="/images/flags/gb.svg" alt="English" width="22" height="16"/> English
              </button>
              <button class="lang-btn" type="button" data-lang="de" aria-label="Deutsch">
                <img src="/images/flags/de.svg" alt="Deutsch" width="22" height="16"/> Deutsch
              </button>
              <button class="lang-btn" type="button" data-lang="sk" aria-label="Slovenƒçina">
                <img src="/images/flags/sk.svg" alt="Slovenƒçina" width="22" height="16"/> Slovenƒçina
              </button>
              <button class="lang-btn" type="button" data-lang="pl" aria-label="Polski">
                <img src="/images/flags/pl.svg" alt="Polski" width="22" height="16"/> Polski
              </button>
              <button class="lang-btn" type="button" data-lang="hu" aria-label="Magyar">
                <img src="/images/flags/hu.svg" alt="Magyar" width="22" height="16"/> Magyar
              </button>
            </div>
          </details>
        </div>
      </nav>

      <!-- Jazykov√© p≈ôep√≠naƒçe ‚Äì desktop (DROPDOWN) -->
      <div class="language-switcher desktop-switcher" aria-label="Jazyk">
        <details class="lang-dropdown" id="langDropdownDesktop">
          <summary class="lang-current" aria-label="Zmƒõnit jazyk">
            <img class="lang-current-flag" src="/images/flags/cz.svg" alt="ƒåe≈°tina" width="22" height="16"/>
            <span class="lang-current-label">ƒåe≈°tina</span>
            <span class="lang-caret" aria-hidden="true">‚ñæ</span>
          </summary>

          <div class="lang-menu" role="listbox" aria-label="Vyber jazyk">
            <button class="lang-btn" type="button" data-lang="cs" aria-label="ƒåe≈°tina">
              <img src="/images/flags/cz.svg" alt="ƒåe≈°tina" width="22" height="16"/> ƒåe≈°tina
            </button>
            <button class="lang-btn" type="button" data-lang="en" aria-label="English">
              <img src="/images/flags/gb.svg" alt="English" width="22" height="16"/> English
            </button>
            <button class="lang-btn" type="button" data-lang="de" aria-label="Deutsch">
              <img src="/images/flags/de.svg" alt="Deutsch" width="22" height="16"/> Deutsch
            </button>
            <button class="lang-btn" type="button" data-lang="sk" aria-label="Slovenƒçina">
              <img src="/images/flags/sk.svg" alt="Slovenƒçina" width="22" height="16"/> Slovenƒçina
            </button>
            <button class="lang-btn" type="button" data-lang="pl" aria-label="Polski">
              <img src="/images/flags/pl.svg" alt="Polski" width="22" height="16"/> Polski
            </button>
            <button class="lang-btn" type="button" data-lang="hu" aria-label="Magyar">
              <img src="/images/flags/hu.svg" alt="Magyar" width="22" height="16"/> Magyar
            </button>
          </div>
        </details>
      </div>

      <div class="menu-overlay-bg" aria-hidden="true"></div>
    </div>
  </header>

  <main id="main">
    <!-- Hero sekce -->
    <section class="events-hero" aria-labelledby="events-hero-title">
      <div class="container events-hero-content">
        <div class="events-hero-text">
          <h1 id="events-hero-title" class="events-hero-title" data-i18n-key="events-hero-title">
            Nejlep≈°√≠ z√°≈æitky na dosah
          </h1>
          <p class="events-hero-desc" data-i18n-key="events-hero-desc">
            Objevte koncerty, festivaly, divadlo i sportovn√≠ akce v jednom p≈ôehledn√©m katalogu.
          </p>
          <a href="#upcoming-events" class="events-cta-btn" data-i18n-key="events-hero-cta">
            Zjistit nejbli≈æ≈°√≠ ud√°losti
          </a>
        </div>
        <div class="events-hero-image" aria-hidden="true">
          <img src="/images/hero-events.svg" alt="" loading="lazy" />
        </div>
      </div>
    </section>

    <!-- Sekce: Nejbli≈æ≈°√≠ ud√°losti -->
    <section id="upcoming-events" class="events-upcoming-section" aria-labelledby="events-upcoming-title" aria-busy="true" data-tm-size="6">
      <div class="container">

        <!-- FILTRY (trvale viditeln√©) -->
        <form id="events-filters-form" class="events-filters filter-dock" novalidate role="search">
          <div class="filters-toolbar" aria-label="Rychl√© filtry">
            <div class="chips">
              <button type="button" class="chip" id="chipToday" data-i18n-key="filters.today">Dnes</button>
              <button type="button" class="chip" id="chipWeekend" data-i18n-key="filters.weekend">Tento v√≠kend</button>
              <button type="button" class="chip ghost" id="chipClear" data-i18n-key="filters.reset">Vymazat</button>
            </div>
            <button type="button" class="chip chip-near" id="chipNearMe" aria-label="Naj√≠t akce pobl√≠≈æ" data-i18n-aria="filters.nearMe">
              <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="3"></circle><path d="M12 2v3M12 19v3M2 12h3M19 12h3M4.9 4.9l2.1 2.1M17 17l2.1 2.1M4.9 19.1l2.1-2.1M17 7l2.1-2.1"/></svg>
              <span data-i18n-key="filters.nearMe">V m√©m okol√≠</span>
            </button>
          </div>

          <fieldset class="filters-fieldset">
            <legend class="sr-only">Filtry</legend>

            <div class="filter-group native-date from is-hidden">
              <label for="filter-date-from" data-i18n-key="filters.from">Od</label>
              <input type="date" id="filter-date-from" name="date_from" class="styled-input" inputmode="none" />
            </div>

            <div class="filter-group native-date to is-hidden">
              <label for="filter-date-to" data-i18n-key="filters.to">Do</label>
              <input type="date" id="filter-date-to" name="date_to" class="styled-input" inputmode="none" />
            </div>

            <div class="filter-group">
              <label for="filter-category" data-i18n-key="filters.category">Kategorie</label>
              <select id="filter-category" class="styled-select">
                <option value="all" data-i18n-key="filters.all">V≈°e</option>
                <option value="concert" data-i18n-key="category-concert">Koncerty</option>
                <option value="festival" data-i18n-key="category-festival">Festivaly</option>
                <option value="sport" data-i18n-key="category-sport">Sport</option>
                <option value="theatre" data-i18n-key="category-theatre">Divadlo</option>
              </select>
            </div>

            <div class="filter-group">
              <label for="filter-sort" data-i18n-key="filters.sort">≈òazen√≠</label>
              <select id="filter-sort" class="styled-select">
                <option value="nearest" data-i18n-key="filters.nearest">Nejbli≈æ≈°√≠</option>
                <option value="latest" data-i18n-key="filters.latest">Nejnovƒõj≈°√≠</option>
              </select>
            </div>

            <div class="filter-group">
              <label for="filter-city" data-i18n-key="filters.city">Mƒõsto</label>
              <div class="field">
                <span class="leading" aria-hidden="true">
                  <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2a7 7 0 0 0-7 7c0 5 7 13 7 13s7-8 7-13a7 7 0 0 0-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></svg>
                </span>
                <input id="filter-city" type="text" class="styled-input"
                       placeholder="Praha, Brno‚Ä¶" data-i18n-placeholder="filters.cityPlaceholder" autocomplete="off" />
              </div>
            </div>

            <div class="filter-group date-combo">
              <label for="date-combo-button" data-i18n-key="filters.date">Term√≠n</label>
              <button
                id="date-combo-button"
                class="combo-button"
                type="button"
                aria-haspopup="dialog"
                aria-expanded="false"
                aria-controls="date-combo-popover">
                <span class="combo-text" id="date-combo-text" data-i18n-key="filters.anytime">Kdykoliv</span>
              </button>
              <div class="combo-popover ajsee-date-popover" id="date-combo-popover" hidden></div>
            </div>

            <div class="filter-group filter-keyword">
              <label for="filter-keyword" data-i18n-key="filters.keyword">Kl√≠ƒçov√© slovo</label>
              <div class="field">
                <span class="leading" aria-hidden="true">
                  <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.5 21.5 20l-6-6zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"/></svg>
                </span>
                <input id="filter-keyword" type="search" class="styled-input"
                       placeholder="Umƒõlec, m√≠sto, akce‚Ä¶" data-i18n-placeholder="filters.keywordPlaceholder" />
              </div>
            </div>

            <div class="filter-actions">
              <button type="button" class="btn btn-ghost" id="filter-nearme" data-i18n-key="filters.nearMe" data-i18n-aria="filters.nearMe">V m√©m okol√≠</button>
              <button type="submit" class="btn btn-primary" data-i18n-key="filters.apply">Pou≈æ√≠t filtry</button>
              <button type="reset" class="btn btn-ghost" data-i18n-key="filters.reset">Vymazat</button>
            </div>
          </fieldset>
        </form>

        <div class="event-demo-badge" id="demoBadge" role="note" aria-live="polite" aria-label="" data-i18n-aria="event-demo.ariaLabel">
          <span class="ib-icon" aria-hidden="true">‚ú®</span>
          <p class="ib-text">
            <strong data-i18n-key="event-demo.title">Uk√°zkov√© ud√°losti.</strong>
            <span data-i18n-key="event-demo.body">P≈ôipravujeme re√°ln√Ω prodej vstupenek. Sledujte n√°s!</span>
          </p>
          <a class="ib-cta" id="demoBadgeCta"
             href="/coming-soon?utm_source=site&utm_medium=demo_badge&utm_campaign=waitlist"
             data-i18n-key="event-demo.cta">Sleduj novinky</a>
        </div>

        <h2 class="events-upcoming-title" id="events-upcoming-title" data-i18n-key="events-upcoming-title">Nejbli≈æ≈°√≠ ud√°losti</h2>

        <p id="tm-status" role="status" aria-live="polite" class="events-status"></p>
        <div id="tm-error" class="events-error" hidden></div>

        <div id="eventsList" class="events-list" aria-live="polite"></div>
        <noscript>Pro zobrazen√≠ ud√°lost√≠ povolte JavaScript.</noscript>
      </div>
    </section>

    <section class="events-benefits why-us-section" aria-labelledby="events-benefits-title">
      <div class="container">
        <h3 id="events-benefits-title" data-i18n-key="events-benefits-title">Proƒç s n√°mi?</h3>
        <div class="benefits-list" role="list">
          <div class="benefit" role="listitem">
            <span class="benefit-icon" aria-hidden="true">üé´</span>
            <span data-i18n-key="events-benefit-1">Origin√°ln√≠ vstupenky p≈ô√≠mo od po≈ôadatel≈Ø</span>
          </div>
          <div class="benefit" role="listitem">
            <span class="benefit-icon" aria-hidden="true">ü§ù</span>
            <span data-i18n-key="events-benefit-2">Lok√°ln√≠ z√°kaznick√° podpora</span>
          </div>
          <div class="benefit" role="listitem">
            <span class="benefit-icon" aria-hidden="true">‚≠ê</span>
            <span data-i18n-key="events-benefit-3">Peƒçlivƒõ vyb√≠ran√© akce</span>
          </div>
        </div>
      </div>
    </section>

    <!-- MODAL: Detail ud√°losti -->
    <div id="eventModal" class="event-modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="event-modal-content">
        <button id="modalClose" class="event-modal-close" aria-label="Zav≈ô√≠t" tabindex="0">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24" aria-hidden="true">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
        <img id="modalImage" class="modal-image" alt="" />
        <div class="modal-details">
          <h2 id="modalTitle" class="modal-title"></h2>
          <p class="modal-meta">
            <span id="modalDate" class="modal-date"></span> |
            <span id="modalLocation" class="modal-location"></span>
          </p>
          <p id="modalDescription" class="modal-description"></p>
          <p class="modal-category">
            <span data-i18n-key="event-category">Kategorie:</span>
            <span id="modalCategory"></span>
          </p>
          <div class="calendar-buttons">
            <span class="calendar-label" data-i18n-key="add-to-calendar">P≈ôidat do kalend√°≈ôe:</span>
            <div class="calendar-btns-wrap">
              <a href="#" id="googleCalendarLink" class="calendar-btn calendar-btn--google" target="_blank" rel="noopener">
                <span class="calendar-btn-icon" aria-hidden="true"></span>
                <span class="calendar-btn-label" data-i18n-key="calendar-google">Google</span>
              </a>
              <a href="#" id="outlookCalendarLink" class="calendar-btn calendar-btn--outlook" target="_blank" rel="noopener">
                <span class="calendar-btn-icon" aria-hidden="true"></span>
                <span class="calendar-btn-label" data-i18n-key="calendar-outlook">Outlook</span>
              </a>
              <a href="#" id="appleCalendarLink" class="calendar-btn calendar-btn--apple" download="event.ics">
                <span class="calendar-btn-icon" aria-hidden="true"></span>
                <span class="calendar-btn-label" data-i18n-key="calendar-apple">Apple / ICS</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Kontakt anchor, aby #contact v menu nekonƒçilo na topu -->
    <section id="contact" class="sr-only" aria-hidden="true"></section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-social" aria-label="Soci√°ln√≠ s√≠tƒõ">
      <a href="https://www.instagram.com/ajseeofficial/" target="_blank" rel="noopener" aria-label="Instagram">
        <img src="/images/icons/instagram.svg" alt="" />
      </a>
      <a href="https://www.facebook.com/profile.php?id=61565404319940" target="_blank" rel="noopener" aria-label="Facebook">
        <img src="/images/icons/facebook.svg" alt="" />
      </a>
      <a href="https://x.com/ajseeofficial" target="_blank" rel="noopener" aria-label="X / Twitter">
        <img src="/images/icons/twitter.svg" alt="" />
      </a>
      <a href="https://www.linkedin.com/company/ajsee" target="_blank" rel="noopener" aria-label="LinkedIn">
        <img src="/images/icons/linkedin.svg" alt="" />
      </a>
    </div>
    <p data-i18n-key="footer-copyright">&copy; 2025 AJSEE¬Æ. V≈°echna pr√°va vyhrazena.</p>
  </footer>

  <!-- Demo badge CTA (propaguje lang do URL + GA event) -->
  <script>
    (function(){
      const cta = document.getElementById('demoBadgeCta');
      const root = document.getElementById('demoBadge');
      if (!cta) return;

      const qs = new URLSearchParams(location.search);
      const lang = (qs.get('lang') || document.documentElement.lang || 'cs').toLowerCase();
      if (['cs','en','de','sk','pl','hu'].includes(lang)) {
        try {
          const url = new URL(cta.href, location.origin);
          url.searchParams.set('lang', lang);
          cta.href = url.toString();
        } catch {}
      }

      cta.addEventListener('click', function(){
        if (window.gtag) window.gtag('event','click_waitlist', { source: 'events_demo_badge' });
      });

      // aria label, a≈æ kdy≈æ budou p≈ôeklady
      if (root) {
        const start = Date.now();
        const id = setInterval(() => {
          if (window.translations || Date.now() - start > 1500) {
            clearInterval(id);
            try {
              const path = 'event-demo.ariaLabel'.split('.');
              let val = window.translations;
              for (const k of path) val = val && typeof val === 'object' ? val[k] : undefined;
              if (typeof val === 'string' && val.trim()) root.setAttribute('aria-label', val);
            } catch(e) {}
          }
        }, 50);
      }
    })();
  </script>

</body>
</html>
